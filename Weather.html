<!DOCTYPE html>
<html>
<head>
  <title>Weather Data Fetcher</title>
</head>
<body>
  <h2>Weather Report</h2>
  <button onclick="getWeatherWithPromises()">Get Weather (Promises)</button>
  <button onclick="getWeatherAsync()">Get Weather (Async/Await)</button>

  <div id="output"></div>

  <script>
    const output = document.getElementById("output");

    // Example: Hyderabad coordinates
    const latitude = 17.3850;
    const longitude = 78.4867;

    const apiURL = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`;

    // -----------------------------
    // 1ï¸âƒ£ Using Promises (.then)
    // -----------------------------
    const getWeatherWithPromises = () => {
      fetch(apiURL)
        .then(response => {
          if (!response.ok) {
            throw new Error("Failed to fetch weather data");
          }
          return response.json();
        })
        .then(data => {
          const weather = data.current_weather;

          output.innerHTML = `
            <h3>Weather Report (Promises)</h3>
            <p>ğŸŒ¡ Temperature: ${weather.temperature}Â°C</p>
            <p>ğŸ’¨ Wind Speed: ${weather.windspeed} km/h</p>
            <p>ğŸ•’ Time: ${weather.time}</p>
          `;
        })
        .catch(error => {
          output.innerHTML = `<p style="color:red;">Error: ${error.message}</p>`;
        });
    };

    // -----------------------------
    // 2ï¸âƒ£ Using Async/Await
    // -----------------------------
    const getWeatherAsync = async () => {
      try {
        const response = await fetch(apiURL);

        if (!response.ok) {
          throw new Error("Failed to fetch weather data");
        }

        const data = await response.json();
        const weather = data.current_weather;

        output.innerHTML = `
          <h3>Weather Report (Async/Await)</h3>
          <p>ğŸŒ¡ Temperature: ${weather.temperature}Â°C</p>
          <p>ğŸ’¨ Wind Speed: ${weather.windspeed} km/h</p>
          <p>ğŸ•’ Time: ${weather.time}</p>
        `;
      } catch (error) {
        output.innerHTML = `<p style="color:red;">Error: ${error.message}</p>`;
      }
    };
  </script>
</body>
</html>